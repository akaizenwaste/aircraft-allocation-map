const { createClient } = require('@supabase/supabase-js');

const supabase = createClient(
  'https://prfmjsgurcnjjxnrpfws.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InByZm1qc2d1cmNuamp4bnJwZndzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2OTAzNjAyNiwiZXhwIjoyMDg0NjEyMDI2fQ.xX2PQWRkmQfR4e3DtOp13FJkmVrqC9FqY7Pq_r8B4vc'
);

// Comprehensive US airports data
const airports = [
  // Major Hubs
  { iata_code: 'ATL', name: 'Hartsfield-Jackson Atlanta International Airport', lat: 33.6407, lng: -84.4277, timezone: 'America/New_York', city: 'Atlanta', state: 'GA' },
  { iata_code: 'DFW', name: 'Dallas/Fort Worth International Airport', lat: 32.8998, lng: -97.0403, timezone: 'America/Chicago', city: 'Dallas', state: 'TX' },
  { iata_code: 'DEN', name: 'Denver International Airport', lat: 39.8561, lng: -104.6737, timezone: 'America/Denver', city: 'Denver', state: 'CO' },
  { iata_code: 'ORD', name: "O'Hare International Airport", lat: 41.9742, lng: -87.9073, timezone: 'America/Chicago', city: 'Chicago', state: 'IL' },
  { iata_code: 'LAX', name: 'Los Angeles International Airport', lat: 33.9425, lng: -118.4081, timezone: 'America/Los_Angeles', city: 'Los Angeles', state: 'CA' },
  { iata_code: 'JFK', name: 'John F. Kennedy International Airport', lat: 40.6413, lng: -73.7781, timezone: 'America/New_York', city: 'New York', state: 'NY' },
  { iata_code: 'SFO', name: 'San Francisco International Airport', lat: 37.6213, lng: -122.3790, timezone: 'America/Los_Angeles', city: 'San Francisco', state: 'CA' },
  { iata_code: 'SEA', name: 'Seattle-Tacoma International Airport', lat: 47.4502, lng: -122.3088, timezone: 'America/Los_Angeles', city: 'Seattle', state: 'WA' },
  { iata_code: 'LAS', name: 'Harry Reid International Airport', lat: 36.0840, lng: -115.1537, timezone: 'America/Los_Angeles', city: 'Las Vegas', state: 'NV' },
  { iata_code: 'MCO', name: 'Orlando International Airport', lat: 28.4312, lng: -81.3081, timezone: 'America/New_York', city: 'Orlando', state: 'FL' },
  { iata_code: 'EWR', name: 'Newark Liberty International Airport', lat: 40.6895, lng: -74.1745, timezone: 'America/New_York', city: 'Newark', state: 'NJ' },
  { iata_code: 'MIA', name: 'Miami International Airport', lat: 25.7959, lng: -80.2870, timezone: 'America/New_York', city: 'Miami', state: 'FL' },
  { iata_code: 'PHX', name: 'Phoenix Sky Harbor International Airport', lat: 33.4373, lng: -112.0078, timezone: 'America/Phoenix', city: 'Phoenix', state: 'AZ' },
  { iata_code: 'IAH', name: 'George Bush Intercontinental Airport', lat: 29.9902, lng: -95.3368, timezone: 'America/Chicago', city: 'Houston', state: 'TX' },
  { iata_code: 'BOS', name: 'Boston Logan International Airport', lat: 42.3656, lng: -71.0096, timezone: 'America/New_York', city: 'Boston', state: 'MA' },
  { iata_code: 'MSP', name: 'Minneapolis-Saint Paul International Airport', lat: 44.8848, lng: -93.2223, timezone: 'America/Chicago', city: 'Minneapolis', state: 'MN' },
  { iata_code: 'DTW', name: 'Detroit Metropolitan Wayne County Airport', lat: 42.2162, lng: -83.3554, timezone: 'America/Detroit', city: 'Detroit', state: 'MI' },
  { iata_code: 'FLL', name: 'Fort Lauderdale-Hollywood International Airport', lat: 26.0742, lng: -80.1506, timezone: 'America/New_York', city: 'Fort Lauderdale', state: 'FL' },
  { iata_code: 'PHL', name: 'Philadelphia International Airport', lat: 39.8729, lng: -75.2437, timezone: 'America/New_York', city: 'Philadelphia', state: 'PA' },
  { iata_code: 'LGA', name: 'LaGuardia Airport', lat: 40.7769, lng: -73.8740, timezone: 'America/New_York', city: 'New York', state: 'NY' },
  { iata_code: 'BWI', name: 'Baltimore/Washington International Airport', lat: 39.1774, lng: -76.6684, timezone: 'America/New_York', city: 'Baltimore', state: 'MD' },
  { iata_code: 'DCA', name: 'Ronald Reagan Washington National Airport', lat: 38.8512, lng: -77.0402, timezone: 'America/New_York', city: 'Washington', state: 'DC' },
  { iata_code: 'IAD', name: 'Washington Dulles International Airport', lat: 38.9531, lng: -77.4565, timezone: 'America/New_York', city: 'Washington', state: 'DC' },
  { iata_code: 'SAN', name: 'San Diego International Airport', lat: 32.7338, lng: -117.1933, timezone: 'America/Los_Angeles', city: 'San Diego', state: 'CA' },
  { iata_code: 'TPA', name: 'Tampa International Airport', lat: 27.9755, lng: -82.5332, timezone: 'America/New_York', city: 'Tampa', state: 'FL' },
  { iata_code: 'SLC', name: 'Salt Lake City International Airport', lat: 40.7884, lng: -111.9778, timezone: 'America/Denver', city: 'Salt Lake City', state: 'UT' },
  { iata_code: 'MDW', name: 'Chicago Midway International Airport', lat: 41.7868, lng: -87.7522, timezone: 'America/Chicago', city: 'Chicago', state: 'IL' },
  { iata_code: 'HNL', name: 'Daniel K. Inouye International Airport', lat: 21.3187, lng: -157.9225, timezone: 'Pacific/Honolulu', city: 'Honolulu', state: 'HI' },
  { iata_code: 'PDX', name: 'Portland International Airport', lat: 45.5898, lng: -122.5951, timezone: 'America/Los_Angeles', city: 'Portland', state: 'OR' },
  { iata_code: 'STL', name: 'St. Louis Lambert International Airport', lat: 38.7487, lng: -90.3700, timezone: 'America/Chicago', city: 'St. Louis', state: 'MO' },
  { iata_code: 'BNA', name: 'Nashville International Airport', lat: 36.1263, lng: -86.6774, timezone: 'America/Chicago', city: 'Nashville', state: 'TN' },
  { iata_code: 'AUS', name: 'Austin-Bergstrom International Airport', lat: 30.1975, lng: -97.6664, timezone: 'America/Chicago', city: 'Austin', state: 'TX' },
  { iata_code: 'HOU', name: 'William P. Hobby Airport', lat: 29.6454, lng: -95.2789, timezone: 'America/Chicago', city: 'Houston', state: 'TX' },
  { iata_code: 'OAK', name: 'Oakland International Airport', lat: 37.7126, lng: -122.2197, timezone: 'America/Los_Angeles', city: 'Oakland', state: 'CA' },
  { iata_code: 'SJC', name: 'San Jose International Airport', lat: 37.3639, lng: -121.9289, timezone: 'America/Los_Angeles', city: 'San Jose', state: 'CA' },
  { iata_code: 'DAL', name: 'Dallas Love Field', lat: 32.8471, lng: -96.8518, timezone: 'America/Chicago', city: 'Dallas', state: 'TX' },
  { iata_code: 'SAT', name: 'San Antonio International Airport', lat: 29.5337, lng: -98.4698, timezone: 'America/Chicago', city: 'San Antonio', state: 'TX' },
  { iata_code: 'RSW', name: 'Southwest Florida International Airport', lat: 26.5362, lng: -81.7552, timezone: 'America/New_York', city: 'Fort Myers', state: 'FL' },
  { iata_code: 'RDU', name: 'Raleigh-Durham International Airport', lat: 35.8801, lng: -78.7880, timezone: 'America/New_York', city: 'Raleigh', state: 'NC' },
  { iata_code: 'CLE', name: 'Cleveland Hopkins International Airport', lat: 41.4117, lng: -81.8498, timezone: 'America/New_York', city: 'Cleveland', state: 'OH' },
  { iata_code: 'IND', name: 'Indianapolis International Airport', lat: 39.7173, lng: -86.2944, timezone: 'America/Indiana/Indianapolis', city: 'Indianapolis', state: 'IN' },
  { iata_code: 'CMH', name: 'John Glenn Columbus International Airport', lat: 39.9980, lng: -82.8919, timezone: 'America/New_York', city: 'Columbus', state: 'OH' },
  { iata_code: 'PIT', name: 'Pittsburgh International Airport', lat: 40.4915, lng: -80.2329, timezone: 'America/New_York', city: 'Pittsburgh', state: 'PA' },
  { iata_code: 'MCI', name: 'Kansas City International Airport', lat: 39.2976, lng: -94.7139, timezone: 'America/Chicago', city: 'Kansas City', state: 'MO' },
  { iata_code: 'CVG', name: 'Cincinnati/Northern Kentucky International Airport', lat: 39.0488, lng: -84.6678, timezone: 'America/New_York', city: 'Cincinnati', state: 'OH' },
  { iata_code: 'SMF', name: 'Sacramento International Airport', lat: 38.6954, lng: -121.5908, timezone: 'America/Los_Angeles', city: 'Sacramento', state: 'CA' },
  { iata_code: 'SNA', name: 'John Wayne Airport', lat: 33.6757, lng: -117.8682, timezone: 'America/Los_Angeles', city: 'Santa Ana', state: 'CA' },
  { iata_code: 'MKE', name: 'Milwaukee Mitchell International Airport', lat: 42.9472, lng: -87.8966, timezone: 'America/Chicago', city: 'Milwaukee', state: 'WI' },
  { iata_code: 'JAX', name: 'Jacksonville International Airport', lat: 30.4941, lng: -81.6879, timezone: 'America/New_York', city: 'Jacksonville', state: 'FL' },
  { iata_code: 'OMA', name: 'Eppley Airfield', lat: 41.3032, lng: -95.8941, timezone: 'America/Chicago', city: 'Omaha', state: 'NE' },
  { iata_code: 'ABQ', name: 'Albuquerque International Sunport', lat: 35.0402, lng: -106.6094, timezone: 'America/Denver', city: 'Albuquerque', state: 'NM' },
  { iata_code: 'BUR', name: 'Hollywood Burbank Airport', lat: 34.2005, lng: -118.3585, timezone: 'America/Los_Angeles', city: 'Burbank', state: 'CA' },
  { iata_code: 'ANC', name: 'Ted Stevens Anchorage International Airport', lat: 61.1743, lng: -149.9962, timezone: 'America/Anchorage', city: 'Anchorage', state: 'AK' },
  { iata_code: 'ONT', name: 'Ontario International Airport', lat: 34.0560, lng: -117.6012, timezone: 'America/Los_Angeles', city: 'Ontario', state: 'CA' },
  { iata_code: 'RNO', name: 'Reno-Tahoe International Airport', lat: 39.4991, lng: -119.7681, timezone: 'America/Los_Angeles', city: 'Reno', state: 'NV' },
  { iata_code: 'SJU', name: 'Luis Muñoz Marín International Airport', lat: 18.4394, lng: -66.0018, timezone: 'America/Puerto_Rico', city: 'San Juan', state: 'PR' },
  { iata_code: 'PBI', name: 'Palm Beach International Airport', lat: 26.6832, lng: -80.0956, timezone: 'America/New_York', city: 'West Palm Beach', state: 'FL' },
  { iata_code: 'BDL', name: 'Bradley International Airport', lat: 41.9389, lng: -72.6832, timezone: 'America/New_York', city: 'Hartford', state: 'CT' },
  { iata_code: 'TUS', name: 'Tucson International Airport', lat: 32.1161, lng: -110.9410, timezone: 'America/Phoenix', city: 'Tucson', state: 'AZ' },
  { iata_code: 'ELP', name: 'El Paso International Airport', lat: 31.8072, lng: -106.3776, timezone: 'America/Denver', city: 'El Paso', state: 'TX' },
  { iata_code: 'ORF', name: 'Norfolk International Airport', lat: 36.8946, lng: -76.2012, timezone: 'America/New_York', city: 'Norfolk', state: 'VA' },
  { iata_code: 'OKC', name: 'Will Rogers World Airport', lat: 35.3931, lng: -97.6007, timezone: 'America/Chicago', city: 'Oklahoma City', state: 'OK' },
  { iata_code: 'LIT', name: 'Bill and Hillary Clinton National Airport', lat: 34.7294, lng: -92.2243, timezone: 'America/Chicago', city: 'Little Rock', state: 'AR' },
  { iata_code: 'RIC', name: 'Richmond International Airport', lat: 37.5052, lng: -77.3197, timezone: 'America/New_York', city: 'Richmond', state: 'VA' },
  { iata_code: 'BHM', name: 'Birmingham-Shuttlesworth International Airport', lat: 33.5629, lng: -86.7535, timezone: 'America/Chicago', city: 'Birmingham', state: 'AL' },
  { iata_code: 'GEG', name: 'Spokane International Airport', lat: 47.6199, lng: -117.5338, timezone: 'America/Los_Angeles', city: 'Spokane', state: 'WA' },
  { iata_code: 'BOI', name: 'Boise Airport', lat: 43.5644, lng: -116.2228, timezone: 'America/Boise', city: 'Boise', state: 'ID' },
  { iata_code: 'TUL', name: 'Tulsa International Airport', lat: 36.1984, lng: -95.8881, timezone: 'America/Chicago', city: 'Tulsa', state: 'OK' },
  { iata_code: 'MSY', name: 'Louis Armstrong New Orleans International Airport', lat: 29.9934, lng: -90.2580, timezone: 'America/Chicago', city: 'New Orleans', state: 'LA' },
  { iata_code: 'CLT', name: 'Charlotte Douglas International Airport', lat: 35.2140, lng: -80.9431, timezone: 'America/New_York', city: 'Charlotte', state: 'NC' },
  { iata_code: 'MEM', name: 'Memphis International Airport', lat: 35.0424, lng: -89.9767, timezone: 'America/Chicago', city: 'Memphis', state: 'TN' },
  { iata_code: 'PVD', name: 'T.F. Green International Airport', lat: 41.7267, lng: -71.4382, timezone: 'America/New_York', city: 'Providence', state: 'RI' },
  { iata_code: 'SDF', name: 'Louisville International Airport', lat: 38.1744, lng: -85.7360, timezone: 'America/Kentucky/Louisville', city: 'Louisville', state: 'KY' },
  { iata_code: 'ALB', name: 'Albany International Airport', lat: 42.7483, lng: -73.8017, timezone: 'America/New_York', city: 'Albany', state: 'NY' },
  { iata_code: 'BUF', name: 'Buffalo Niagara International Airport', lat: 42.9405, lng: -78.7322, timezone: 'America/New_York', city: 'Buffalo', state: 'NY' },
  { iata_code: 'ROC', name: 'Greater Rochester International Airport', lat: 43.1189, lng: -77.6724, timezone: 'America/New_York', city: 'Rochester', state: 'NY' },
  { iata_code: 'SYR', name: 'Syracuse Hancock International Airport', lat: 43.1112, lng: -76.1063, timezone: 'America/New_York', city: 'Syracuse', state: 'NY' },
  { iata_code: 'GRR', name: 'Gerald R. Ford International Airport', lat: 42.8808, lng: -85.5228, timezone: 'America/Detroit', city: 'Grand Rapids', state: 'MI' },
  { iata_code: 'DSM', name: 'Des Moines International Airport', lat: 41.5340, lng: -93.6631, timezone: 'America/Chicago', city: 'Des Moines', state: 'IA' },
  { iata_code: 'MSN', name: 'Dane County Regional Airport', lat: 43.1399, lng: -89.3375, timezone: 'America/Chicago', city: 'Madison', state: 'WI' },
  { iata_code: 'PSP', name: 'Palm Springs International Airport', lat: 33.8303, lng: -116.5067, timezone: 'America/Los_Angeles', city: 'Palm Springs', state: 'CA' },
  { iata_code: 'LGB', name: 'Long Beach Airport', lat: 33.8177, lng: -118.1516, timezone: 'America/Los_Angeles', city: 'Long Beach', state: 'CA' },
  { iata_code: 'CHS', name: 'Charleston International Airport', lat: 32.8986, lng: -80.0405, timezone: 'America/New_York', city: 'Charleston', state: 'SC' },
  { iata_code: 'GSP', name: 'Greenville-Spartanburg International Airport', lat: 34.8957, lng: -82.2189, timezone: 'America/New_York', city: 'Greenville', state: 'SC' },
  { iata_code: 'SAV', name: 'Savannah/Hilton Head International Airport', lat: 32.1276, lng: -81.2021, timezone: 'America/New_York', city: 'Savannah', state: 'GA' },
  { iata_code: 'MYR', name: 'Myrtle Beach International Airport', lat: 33.6797, lng: -78.9283, timezone: 'America/New_York', city: 'Myrtle Beach', state: 'SC' },
  { iata_code: 'PNS', name: 'Pensacola International Airport', lat: 30.4734, lng: -87.1866, timezone: 'America/Chicago', city: 'Pensacola', state: 'FL' },
  { iata_code: 'MHT', name: 'Manchester-Boston Regional Airport', lat: 42.9326, lng: -71.4357, timezone: 'America/New_York', city: 'Manchester', state: 'NH' },
  { iata_code: 'PWM', name: 'Portland International Jetport', lat: 43.6462, lng: -70.3093, timezone: 'America/New_York', city: 'Portland', state: 'ME' },
  { iata_code: 'OGG', name: 'Kahului Airport', lat: 20.8986, lng: -156.4305, timezone: 'Pacific/Honolulu', city: 'Kahului', state: 'HI' },
  { iata_code: 'KOA', name: 'Kona International Airport', lat: 19.7388, lng: -156.0456, timezone: 'Pacific/Honolulu', city: 'Kailua-Kona', state: 'HI' },
  { iata_code: 'LIH', name: 'Lihue Airport', lat: 21.9760, lng: -159.3390, timezone: 'Pacific/Honolulu', city: 'Lihue', state: 'HI' },
  { iata_code: 'FAI', name: 'Fairbanks International Airport', lat: 64.8151, lng: -147.8561, timezone: 'America/Anchorage', city: 'Fairbanks', state: 'AK' },
  { iata_code: 'JNU', name: 'Juneau International Airport', lat: 58.3550, lng: -134.5763, timezone: 'America/Juneau', city: 'Juneau', state: 'AK' },
  { iata_code: 'ICT', name: 'Wichita Dwight D. Eisenhower National Airport', lat: 37.6499, lng: -97.4331, timezone: 'America/Chicago', city: 'Wichita', state: 'KS' },
  { iata_code: 'COS', name: 'Colorado Springs Airport', lat: 38.8058, lng: -104.7007, timezone: 'America/Denver', city: 'Colorado Springs', state: 'CO' },
  { iata_code: 'XNA', name: 'Northwest Arkansas National Airport', lat: 36.2819, lng: -94.3068, timezone: 'America/Chicago', city: 'Bentonville', state: 'AR' },
  { iata_code: 'LEX', name: 'Blue Grass Airport', lat: 38.0365, lng: -84.6059, timezone: 'America/New_York', city: 'Lexington', state: 'KY' },
  { iata_code: 'HSV', name: 'Huntsville International Airport', lat: 34.6372, lng: -86.7751, timezone: 'America/Chicago', city: 'Huntsville', state: 'AL' },
  { iata_code: 'MOB', name: 'Mobile Regional Airport', lat: 30.6912, lng: -88.2428, timezone: 'America/Chicago', city: 'Mobile', state: 'AL' },
  { iata_code: 'GSO', name: 'Piedmont Triad International Airport', lat: 36.0978, lng: -79.9373, timezone: 'America/New_York', city: 'Greensboro', state: 'NC' },
  { iata_code: 'AVL', name: 'Asheville Regional Airport', lat: 35.4362, lng: -82.5418, timezone: 'America/New_York', city: 'Asheville', state: 'NC' },
  { iata_code: 'CAE', name: 'Columbia Metropolitan Airport', lat: 33.9388, lng: -81.1195, timezone: 'America/New_York', city: 'Columbia', state: 'SC' },
  { iata_code: 'DAY', name: 'Dayton International Airport', lat: 39.9024, lng: -84.2194, timezone: 'America/New_York', city: 'Dayton', state: 'OH' },
  { iata_code: 'CAK', name: 'Akron-Canton Airport', lat: 40.9161, lng: -81.4422, timezone: 'America/New_York', city: 'Akron', state: 'OH' },
  { iata_code: 'FNT', name: 'Bishop International Airport', lat: 42.9654, lng: -83.7436, timezone: 'America/Detroit', city: 'Flint', state: 'MI' },
  { iata_code: 'LAN', name: 'Capital Region International Airport', lat: 42.7787, lng: -84.5874, timezone: 'America/Detroit', city: 'Lansing', state: 'MI' },
  { iata_code: 'FWA', name: 'Fort Wayne International Airport', lat: 40.9785, lng: -85.1951, timezone: 'America/Indiana/Indianapolis', city: 'Fort Wayne', state: 'IN' },
  { iata_code: 'SBN', name: 'South Bend International Airport', lat: 41.7087, lng: -86.3173, timezone: 'America/Indiana/Indianapolis', city: 'South Bend', state: 'IN' },
  { iata_code: 'EVV', name: 'Evansville Regional Airport', lat: 38.0370, lng: -87.5324, timezone: 'America/Chicago', city: 'Evansville', state: 'IN' },
  { iata_code: 'FAT', name: 'Fresno Yosemite International Airport', lat: 36.7762, lng: -119.7181, timezone: 'America/Los_Angeles', city: 'Fresno', state: 'CA' },
  { iata_code: 'SBA', name: 'Santa Barbara Airport', lat: 34.4262, lng: -119.8404, timezone: 'America/Los_Angeles', city: 'Santa Barbara', state: 'CA' },
  { iata_code: 'MRY', name: 'Monterey Regional Airport', lat: 36.5870, lng: -121.8430, timezone: 'America/Los_Angeles', city: 'Monterey', state: 'CA' },
  { iata_code: 'EUG', name: 'Eugene Airport', lat: 44.1246, lng: -123.2119, timezone: 'America/Los_Angeles', city: 'Eugene', state: 'OR' },
  { iata_code: 'MFR', name: 'Rogue Valley International-Medford Airport', lat: 42.3742, lng: -122.8735, timezone: 'America/Los_Angeles', city: 'Medford', state: 'OR' },
  { iata_code: 'BZN', name: 'Bozeman Yellowstone International Airport', lat: 45.7775, lng: -111.1530, timezone: 'America/Denver', city: 'Bozeman', state: 'MT' },
  { iata_code: 'MSO', name: 'Missoula Montana Airport', lat: 46.9163, lng: -114.0906, timezone: 'America/Denver', city: 'Missoula', state: 'MT' },
  { iata_code: 'BIL', name: 'Billings Logan International Airport', lat: 45.8077, lng: -108.5429, timezone: 'America/Denver', city: 'Billings', state: 'MT' },
  { iata_code: 'FSD', name: 'Sioux Falls Regional Airport', lat: 43.5820, lng: -96.7419, timezone: 'America/Chicago', city: 'Sioux Falls', state: 'SD' },
  { iata_code: 'RAP', name: 'Rapid City Regional Airport', lat: 44.0453, lng: -103.0574, timezone: 'America/Denver', city: 'Rapid City', state: 'SD' },
  { iata_code: 'FAR', name: 'Hector International Airport', lat: 46.9207, lng: -96.8158, timezone: 'America/Chicago', city: 'Fargo', state: 'ND' },
  { iata_code: 'BIS', name: 'Bismarck Municipal Airport', lat: 46.7727, lng: -100.7468, timezone: 'America/Chicago', city: 'Bismarck', state: 'ND' },
  { iata_code: 'GFK', name: 'Grand Forks International Airport', lat: 47.9493, lng: -97.1761, timezone: 'America/Chicago', city: 'Grand Forks', state: 'ND' },
  { iata_code: 'JAC', name: 'Jackson Hole Airport', lat: 43.6073, lng: -110.7377, timezone: 'America/Denver', city: 'Jackson', state: 'WY' },
  { iata_code: 'HDN', name: 'Yampa Valley Regional Airport', lat: 40.4812, lng: -107.2177, timezone: 'America/Denver', city: 'Hayden', state: 'CO' },
  { iata_code: 'EGE', name: 'Eagle County Regional Airport', lat: 39.6426, lng: -106.9177, timezone: 'America/Denver', city: 'Eagle', state: 'CO' },
  { iata_code: 'MTJ', name: 'Montrose Regional Airport', lat: 38.5098, lng: -107.8938, timezone: 'America/Denver', city: 'Montrose', state: 'CO' },
  { iata_code: 'GJT', name: 'Grand Junction Regional Airport', lat: 39.1224, lng: -108.5267, timezone: 'America/Denver', city: 'Grand Junction', state: 'CO' },
  { iata_code: 'DRO', name: 'Durango-La Plata County Airport', lat: 37.1515, lng: -107.7538, timezone: 'America/Denver', city: 'Durango', state: 'CO' },
  { iata_code: 'ASE', name: 'Aspen/Pitkin County Airport', lat: 39.2232, lng: -106.8689, timezone: 'America/Denver', city: 'Aspen', state: 'CO' },
  { iata_code: 'SGU', name: 'St. George Regional Airport', lat: 37.0364, lng: -113.5103, timezone: 'America/Denver', city: 'St. George', state: 'UT' },
  { iata_code: 'FLG', name: 'Flagstaff Pulliam Airport', lat: 35.1385, lng: -111.6692, timezone: 'America/Phoenix', city: 'Flagstaff', state: 'AZ' },
  { iata_code: 'YUM', name: 'Yuma International Airport', lat: 32.6566, lng: -114.6060, timezone: 'America/Phoenix', city: 'Yuma', state: 'AZ' },
  { iata_code: 'SFB', name: 'Orlando Sanford International Airport', lat: 28.7776, lng: -81.2375, timezone: 'America/New_York', city: 'Sanford', state: 'FL' },
  { iata_code: 'PIE', name: 'St. Pete-Clearwater International Airport', lat: 27.9102, lng: -82.6874, timezone: 'America/New_York', city: 'St. Petersburg', state: 'FL' },
  { iata_code: 'SRQ', name: 'Sarasota-Bradenton International Airport', lat: 27.3954, lng: -82.5544, timezone: 'America/New_York', city: 'Sarasota', state: 'FL' },
  { iata_code: 'EYW', name: 'Key West International Airport', lat: 24.5561, lng: -81.7596, timezone: 'America/New_York', city: 'Key West', state: 'FL' },
  { iata_code: 'TLH', name: 'Tallahassee International Airport', lat: 30.3965, lng: -84.3503, timezone: 'America/New_York', city: 'Tallahassee', state: 'FL' },
  { iata_code: 'GNV', name: 'Gainesville Regional Airport', lat: 29.6900, lng: -82.2718, timezone: 'America/New_York', city: 'Gainesville', state: 'FL' },
  { iata_code: 'DAB', name: 'Daytona Beach International Airport', lat: 29.1799, lng: -81.0581, timezone: 'America/New_York', city: 'Daytona Beach', state: 'FL' },
  { iata_code: 'MLB', name: 'Melbourne Orlando International Airport', lat: 28.1028, lng: -80.6453, timezone: 'America/New_York', city: 'Melbourne', state: 'FL' },
  { iata_code: 'VPS', name: 'Destin-Fort Walton Beach Airport', lat: 30.4832, lng: -86.5254, timezone: 'America/Chicago', city: 'Valparaiso', state: 'FL' },
  { iata_code: 'ECP', name: 'Northwest Florida Beaches International Airport', lat: 30.3571, lng: -85.7955, timezone: 'America/Chicago', city: 'Panama City Beach', state: 'FL' },
  { iata_code: 'AGS', name: 'Augusta Regional Airport', lat: 33.3699, lng: -81.9645, timezone: 'America/New_York', city: 'Augusta', state: 'GA' },
  { iata_code: 'CSG', name: 'Columbus Airport', lat: 32.5163, lng: -84.9389, timezone: 'America/New_York', city: 'Columbus', state: 'GA' },
  { iata_code: 'ABE', name: 'Lehigh Valley International Airport', lat: 40.6521, lng: -75.4408, timezone: 'America/New_York', city: 'Allentown', state: 'PA' },
  { iata_code: 'MDT', name: 'Harrisburg International Airport', lat: 40.1935, lng: -76.7634, timezone: 'America/New_York', city: 'Harrisburg', state: 'PA' },
  { iata_code: 'AVP', name: 'Wilkes-Barre/Scranton International Airport', lat: 41.3385, lng: -75.7234, timezone: 'America/New_York', city: 'Scranton', state: 'PA' },
  { iata_code: 'SCE', name: 'University Park Airport', lat: 40.8493, lng: -77.8487, timezone: 'America/New_York', city: 'State College', state: 'PA' },
  { iata_code: 'ERI', name: 'Erie International Airport', lat: 42.0831, lng: -80.1739, timezone: 'America/New_York', city: 'Erie', state: 'PA' },
  { iata_code: 'BGM', name: 'Greater Binghamton Airport', lat: 42.2087, lng: -75.9798, timezone: 'America/New_York', city: 'Binghamton', state: 'NY' },
  { iata_code: 'ELM', name: 'Elmira Corning Regional Airport', lat: 42.1599, lng: -76.8916, timezone: 'America/New_York', city: 'Elmira', state: 'NY' },
  { iata_code: 'ITH', name: 'Ithaca Tompkins International Airport', lat: 42.4910, lng: -76.4584, timezone: 'America/New_York', city: 'Ithaca', state: 'NY' },
  { iata_code: 'ISP', name: 'Long Island MacArthur Airport', lat: 40.7952, lng: -73.1002, timezone: 'America/New_York', city: 'Islip', state: 'NY' },
  { iata_code: 'HPN', name: 'Westchester County Airport', lat: 41.0670, lng: -73.7076, timezone: 'America/New_York', city: 'White Plains', state: 'NY' },
  { iata_code: 'SWF', name: 'New York Stewart International Airport', lat: 41.5041, lng: -74.1048, timezone: 'America/New_York', city: 'Newburgh', state: 'NY' },
  { iata_code: 'ACY', name: 'Atlantic City International Airport', lat: 39.4576, lng: -74.5772, timezone: 'America/New_York', city: 'Atlantic City', state: 'NJ' },
  { iata_code: 'TTN', name: 'Trenton-Mercer Airport', lat: 40.2767, lng: -74.8135, timezone: 'America/New_York', city: 'Trenton', state: 'NJ' },
  { iata_code: 'BTR', name: 'Baton Rouge Metropolitan Airport', lat: 30.5332, lng: -91.1496, timezone: 'America/Chicago', city: 'Baton Rouge', state: 'LA' },
  { iata_code: 'SHV', name: 'Shreveport Regional Airport', lat: 32.4466, lng: -93.8256, timezone: 'America/Chicago', city: 'Shreveport', state: 'LA' },
  { iata_code: 'LFT', name: 'Lafayette Regional Airport', lat: 30.2053, lng: -91.9876, timezone: 'America/Chicago', city: 'Lafayette', state: 'LA' },
  { iata_code: 'GPT', name: 'Gulfport-Biloxi International Airport', lat: 30.4073, lng: -89.0701, timezone: 'America/Chicago', city: 'Gulfport', state: 'MS' },
  { iata_code: 'JAN', name: 'Jackson-Medgar Wiley Evers International Airport', lat: 32.3112, lng: -90.0759, timezone: 'America/Chicago', city: 'Jackson', state: 'MS' },
  { iata_code: 'MGM', name: 'Montgomery Regional Airport', lat: 32.3006, lng: -86.3940, timezone: 'America/Chicago', city: 'Montgomery', state: 'AL' },
  { iata_code: 'CHA', name: 'Chattanooga Metropolitan Airport', lat: 35.0353, lng: -85.2038, timezone: 'America/New_York', city: 'Chattanooga', state: 'TN' },
  { iata_code: 'TYS', name: 'McGhee Tyson Airport', lat: 35.8110, lng: -83.9940, timezone: 'America/New_York', city: 'Knoxville', state: 'TN' },
  { iata_code: 'TRI', name: 'Tri-Cities Airport', lat: 36.4752, lng: -82.4074, timezone: 'America/New_York', city: 'Blountville', state: 'TN' },
  { iata_code: 'ROA', name: 'Roanoke-Blacksburg Regional Airport', lat: 37.3255, lng: -79.9754, timezone: 'America/New_York', city: 'Roanoke', state: 'VA' },
  { iata_code: 'CHO', name: 'Charlottesville-Albemarle Airport', lat: 38.1386, lng: -78.4529, timezone: 'America/New_York', city: 'Charlottesville', state: 'VA' },
  { iata_code: 'PHF', name: 'Newport News/Williamsburg International Airport', lat: 37.1319, lng: -76.4930, timezone: 'America/New_York', city: 'Newport News', state: 'VA' },
  { iata_code: 'ILM', name: 'Wilmington International Airport', lat: 34.2706, lng: -77.9026, timezone: 'America/New_York', city: 'Wilmington', state: 'NC' },
  { iata_code: 'FAY', name: 'Fayetteville Regional Airport', lat: 34.9912, lng: -78.8803, timezone: 'America/New_York', city: 'Fayetteville', state: 'NC' },
  { iata_code: 'OAJ', name: 'Albert J. Ellis Airport', lat: 34.8292, lng: -77.6121, timezone: 'America/New_York', city: 'Jacksonville', state: 'NC' },
  { iata_code: 'PGV', name: 'Pitt-Greenville Airport', lat: 35.6352, lng: -77.3853, timezone: 'America/New_York', city: 'Greenville', state: 'NC' },
  { iata_code: 'FLO', name: 'Florence Regional Airport', lat: 34.1854, lng: -79.7239, timezone: 'America/New_York', city: 'Florence', state: 'SC' },
  { iata_code: 'HHH', name: 'Hilton Head Airport', lat: 32.2244, lng: -80.6975, timezone: 'America/New_York', city: 'Hilton Head Island', state: 'SC' },
  { iata_code: 'LBB', name: 'Lubbock Preston Smith International Airport', lat: 33.6636, lng: -101.8228, timezone: 'America/Chicago', city: 'Lubbock', state: 'TX' },
  { iata_code: 'AMA', name: 'Rick Husband Amarillo International Airport', lat: 35.2194, lng: -101.7059, timezone: 'America/Chicago', city: 'Amarillo', state: 'TX' },
  { iata_code: 'MAF', name: 'Midland International Air and Space Port', lat: 31.9425, lng: -102.2019, timezone: 'America/Chicago', city: 'Midland', state: 'TX' },
  { iata_code: 'CRP', name: 'Corpus Christi International Airport', lat: 27.7704, lng: -97.5012, timezone: 'America/Chicago', city: 'Corpus Christi', state: 'TX' },
  { iata_code: 'HRL', name: 'Valley International Airport', lat: 26.2285, lng: -97.6544, timezone: 'America/Chicago', city: 'Harlingen', state: 'TX' },
  { iata_code: 'MFE', name: 'McAllen Miller International Airport', lat: 26.1758, lng: -98.2386, timezone: 'America/Chicago', city: 'McAllen', state: 'TX' },
  { iata_code: 'BRO', name: 'Brownsville/South Padre Island International Airport', lat: 25.9068, lng: -97.4259, timezone: 'America/Chicago', city: 'Brownsville', state: 'TX' },
  { iata_code: 'LRD', name: 'Laredo International Airport', lat: 27.5438, lng: -99.4616, timezone: 'America/Chicago', city: 'Laredo', state: 'TX' },
  { iata_code: 'SPS', name: 'Wichita Falls Municipal Airport', lat: 33.9888, lng: -98.4919, timezone: 'America/Chicago', city: 'Wichita Falls', state: 'TX' },
  { iata_code: 'TYR', name: 'Tyler Pounds Regional Airport', lat: 32.3541, lng: -95.4024, timezone: 'America/Chicago', city: 'Tyler', state: 'TX' },
  { iata_code: 'GGG', name: 'East Texas Regional Airport', lat: 32.3840, lng: -94.7115, timezone: 'America/Chicago', city: 'Longview', state: 'TX' },
  { iata_code: 'CLL', name: 'Easterwood Field', lat: 30.5886, lng: -96.3638, timezone: 'America/Chicago', city: 'College Station', state: 'TX' },
  { iata_code: 'ACT', name: 'Waco Regional Airport', lat: 31.6113, lng: -97.2305, timezone: 'America/Chicago', city: 'Waco', state: 'TX' },
  { iata_code: 'ABI', name: 'Abilene Regional Airport', lat: 32.4113, lng: -99.6819, timezone: 'America/Chicago', city: 'Abilene', state: 'TX' },
  { iata_code: 'SJT', name: 'San Angelo Regional Airport', lat: 31.3577, lng: -100.4963, timezone: 'America/Chicago', city: 'San Angelo', state: 'TX' },
  { iata_code: 'GRK', name: 'Killeen-Fort Hood Regional Airport', lat: 31.0672, lng: -97.8289, timezone: 'America/Chicago', city: 'Killeen', state: 'TX' },
  { iata_code: 'VCT', name: 'Victoria Regional Airport', lat: 28.8526, lng: -96.9185, timezone: 'America/Chicago', city: 'Victoria', state: 'TX' },
  { iata_code: 'BPT', name: 'Jack Brooks Regional Airport', lat: 29.9508, lng: -94.0207, timezone: 'America/Chicago', city: 'Beaumont', state: 'TX' },
  { iata_code: 'LCH', name: 'Lake Charles Regional Airport', lat: 30.1261, lng: -93.2234, timezone: 'America/Chicago', city: 'Lake Charles', state: 'LA' },
  { iata_code: 'AEX', name: 'Alexandria International Airport', lat: 31.3274, lng: -92.5486, timezone: 'America/Chicago', city: 'Alexandria', state: 'LA' },
  { iata_code: 'MLU', name: 'Monroe Regional Airport', lat: 32.5109, lng: -92.0377, timezone: 'America/Chicago', city: 'Monroe', state: 'LA' },
];

async function seed() {
  console.log(`Seeding ${airports.length} airports...`);

  // Insert in batches of 50
  const batchSize = 50;
  for (let i = 0; i < airports.length; i += batchSize) {
    const batch = airports.slice(i, i + batchSize);
    const { error } = await supabase.from('airports').upsert(batch, { onConflict: 'iata_code' });

    if (error) {
      console.error(`Error inserting batch ${i / batchSize + 1}:`, error.message);
    } else {
      console.log(`Inserted batch ${i / batchSize + 1} (${batch.length} airports)`);
    }
  }

  // Verify count
  const { count } = await supabase.from('airports').select('*', { count: 'exact', head: true });
  console.log(`\nTotal airports in database: ${count}`);
}

seed().catch(console.error);
